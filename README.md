# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

Приложение **Web-larek** выполнено в концепции архитектурного паттерна Model-View-Presenter, который разделяет приложение на три компонента: Model (слой работы с данными приложения), View (слой представления UI) и Presenter (содержит бизнес-логику приложения).

## Слой бизнес-логики:

В качестве презентера в начале разработки приложения будет выступать файл Index.js, в котором по средствам вызова коллбэков будет реализовано взаимодействие между слоем View и слоем Model. Также в этом файле реализуется работа класса Api.

Класс **Api** - отвечает за реализацию работы с запросами к серверу. В конструктор принимает  baseUrl и options. Содержит два метода – метод, отвечающий за HTTP GET запрос к серверу, и метод, отвечающий за HTTP POST запрос к серверу.
Поля класса:
```
readonly baseUrl: string;
protected options: RequestInit;
```
Методы класса:
```
get(uri: string): void
post(uri: string, data: object, method: ApiPostMethods): void
```

## Слой работы с данными приложения:

Класс **ItemsModel** отвечает за инкапсуляцию работы с данными приложения, которые получает от сервера. Поле items – массив объектов, реализующий интерфейс IItem. Каждый объект этого массива хранить информацию об одном товаре, включая его название, описание, категорию, цену и т. д.
Поля класса:
```
_items: IItem[]
```

Класс **BasketModel** – отвечает за инкапсуляцию работы с данными заказа в корзине приложения. Он содержит бизнес-логику добавления, удаления товаров в массив объектов, выбранных пользователем для покупки. Каждый объект реализует интерфейс IItem. Класс также ответственен за подсчет конечной стоимости всех товаров в корзине. 
Поля класса:
```
_items: IItem[]
_totalPrice: number
```
Методы класса:
```
addItem():
removeItem():
getTotalPrice():
```

## Слой представления UI:

Класс **Item** отвечает за реализацию визуального отображения карточки товара в UI приложения. Класс реализует интерфейс IItem.Поля класса подробно описывают карточку товара – название товара, категория, цена и т.д. Класс имеет сеттеры и геттеры для сеттинга и получения значений полей класса. Для кнопки действия использует компонент Button.
Когда пользователь взаимодействует с карточкой товара – добавить в корзину – событие перехватывает презентер и обновляет модель данных компонента BasketModel.
```
interface IItem {
	title: string;
   	image: string;
	description?: string;
	category?: string;
	price: number;
button: IButton;
}
```
Поля класса:
```
_title: string
_image: string
_price?: number
_category?: string
_description?: string
_button?: IButton
```

Класс **Page** отвечает за реализацию отображения каталога товаров на главной странице приложения, управление счетчиком иконки корзины на главной странице. Поле items – это массив объектов, реализующий интрефейс IItem. basketCounter отображает количество товаров в корзине.  Класс содержит методы отрисовки каталога товаров на странице, обновления значений поля basketCounter.
Поля класса:
```
_items: IItem[]
_basketCounter: number
```
Методы класса:
```
render(data: IItem[]): 
updateBasket():void
```

Класс **Modal** - отвечает за реализацию модальных окон приложения. В конструктор принимается контейнер,  в котором будет размещаться контент модального окна. Содержит методы открытия и закрытия модального окна, также сеттер установки входящего контента.
Поля класса:
```
_content: HTMLElement
button: HTMLButtonElement
```
Методы класса:
```
open(): void
close(): void
set content(data:HTMLElement):
```

Класс **Form** отвечает за реализацию форм приложения, с помощью которого собираются данные от пользователя и их последующая передача в презентер для обработки и взаимодействия с моделью. Поля класса formElement – DOM-элемент формы – контейнер для элементов формы; inputField – поля ввода данных от пользователя; и поля, соответствующие данным пользователя (способ оплаты, адрес, телефон и т.д.)
Класс содержит метод для отрисовки формы на странице, методы работы с формой: возвращение данных, установление данных для inputField и очистка формы.
Поля класса:
```
_formElement: HTMLFormElement
_inputField: HTMLInputElement
payment:
address: string
mail: string
mobile: number
```
Методы класса:
```
render(): 
getValue(): HTMLInputElement
setValue(data: string): void
clearValue(): void
```

Класс **Basket** отвечает за реализацию отображения корзины и взаимодействия с пользователем через графический интерфейс. Содержит сеттеры для установки списка товаров к корзине и для установки значения общей суммы товаров к корзине. Также содержит элементы управления интерфейсом кнопки buttonNext и buttonDelete.
Поля класса:
```
_items: IItem[]
_total:
_buttonNext:
_buttonDelete:
```
Методы класса:
```
set total():
set items(data: ):
```

Класс **Button** отвечает за реализацию отображения кнопок приложения. Содержит строковую переменную title, хранящую текст кнопки, и булевую переменную active для отображения активности/неактивности кнопки для нажатия. Также сеттер для установки теста кнопки. Класс реализует интерфейс IButton.
```
interface IItem {
	title: string;
   	active: boolean;
}
```
Поля класса:
```
_title: string
active: boolean
```
Методы класса:
```
set title():
```

## Брокер событий:
Класс EventEmitter – отвечает за реализацию работы событий приложения. Его функции: возможность установить и снять слушателей̆ событий, вызвать слушателей̆ при возникновении события.
Методы:
```
оn() - устанавливает обработчик на событие
off() – снимает обработчик с события
emit() - инициализирует событие с данными
onAll() - устанавливает обработчик на все события
offAll() - снимает обработчик со всех событий
trigger() - сделать коллбек триггер, генерирующий событие при вызове
```

